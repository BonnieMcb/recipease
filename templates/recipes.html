{% extends "base.html" %}

{% block header %}
<h4 class=" page-header center-align">Recipes</h4>
{% endblock%}

{% block content %}

    <div class="input-field col s12">
        <div>No recipes with the following allergens:</div> <!-- Make text a little larger? -->
        <select multiple id="allergen_name" name="allergen_name" type="checkbox" class="validate"-->
            <option value="" disabled>Select allergen(s)</option>
            {% for allergen in allergens %}
                {% set lowername = ''.join(allergen.name.split()).lower() %}
                {% if lowername in filters %}
                    <option value="{{ allergen.name }}" selected>{{ allergen.name }}</option>
                {% elif lowername in user_allergens %}
                    <option value="{{ allergen_name }}" disabled>{{ allergen.name }}</option>
                {% else %}
                    <option value="{{ allergen.name }}">{{ allergen.name }}</option>
                {% endif %}
            {% endfor %}
        </select>
        <button id="apply-filters">Apply Filter</button>
        <button id="clear-filters">Clear Filter</button>
        <!-- <i class="material-icons prefix">error_outline</i> -->
    </div>
    
        <div class="row">
            {% for recipes in recipes %}
            <div class="activator col s6 m3">
                <div class="card small activator">
                    <div class="activator card-image">
                        {% if recipes.image %}
                        <img class="recipe-picture activator" src={{ recipes.image }}>
                        {% else %}
                        <img class="recipe-picture activator" src="{{ url_for('static', filename='images/' + recipes.category + '.png' ) }}">
                        {% endif %}
                        <span class="activator card-title blue-text text-darken-2">{{ recipes.recipe_name }}</span>
                    </div>
                    <div class="activator card-content">
                         <ul class="activator" id="card-allergens">
                            {% for x in recipes.allergen_name %}
                                <li class="icon {{ x }}">{{ x }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="card-reveal">
                        <span class="card-title grey-text text-darken-4">{{ recipes.recipe_name }}<i class="material-icons right">close</i></span>
                        time: {{ recipes.time }}<br>
                        serves: {{ recipes.servings }}<br>
                        by: {{ recipes.created_by }}<br>
                        <a href="{{ url_for('show_recipe', recipes_id=recipes._id) }}">View recipe</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    
    

{% endblock %}
